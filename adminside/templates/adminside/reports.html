{% load static %} {% block title %}
<title>REPORT</title>
{% endblock %} {% block css %}
<link rel="stylesheet" href="{% static 'css/staff_style.css' %}" />
<!-- Bootstrap CSS (Include in <head>) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Bootstrap JS (Include before </body>) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

{% endblock %}

<div class="staff-page">
  <div class="staff-title mt-4">
    <h3>SALES REPORT</h3>

    <div class="search-container">
      <input
        type="text"
        id="searchInput"
        class="search-input"
        placeholder="Search by name"
      />
      <button class="search-btn" onclick="toggleSearch()">
        <i class="fa fa-search"></i>
      </button>
    </div>
    </form>
  </div>
  <div class="row">
    <div class="da-box">
            <select id="incomeDropdown" class="dropdown" onchange="filterReports()">
            <option value="today" {% if selected_filter == 'today' %}selected{% endif %}>Today</option>
            <option value="monthly" {% if selected_filter == 'monthly' %}selected{% endif %}>Monthly</option>
            <option value="yearly" {% if selected_filter == 'yearly' %}selected{% endif %}>Yearly</option>
        </select>    
    </div>
  </div>
    <br>

<table class="table table-bordered table-striped">
            <thead class="table-dark">
                <tr>
                    <th>Sales ID</th>
                    <th>Order ID</th>
                    <th>Quantity Sold</th>
                    <th>Branch</th>
                    <th>Customer</th>
                    <th>Staff</th>
                    <th>Sale Date</th>
                </tr>
            </thead>
            <tbody>
                {% for sale in sales_data %}
                <tr>
                    <td>{{ sale.sales_id }}</td>
                    <td>{{ sale.order_id|default:"-" }}</td>
                    <td>{{ sale.quantity_sold }}</td>
                    <td>{{ sale.branch_name }}</td>
                    <td>{{ sale.customer }}</td>
                    <td>{{ sale.staff }}</td>
                    <td>{{ sale.sale_date }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="7" class="text-center">No sales data available.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

</div>


<script>
    function applyFilter() {
        let filter = document.getElementById("filterSelect").value;
        window.location.href = "?filter=" + filter;
    }
</script>
<script src="{% static 'js/reports_scripts.js' %}"></script>


    
